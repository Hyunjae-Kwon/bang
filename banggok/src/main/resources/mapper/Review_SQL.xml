<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="review">
 
 	<!-- 여행 후기 리스트 -->
	<!-- [reviewList] 여행후기 게시판 리스트 -->
 	<select id="reviewList" resultType="hashmap">
	 <![CDATA[
			SELECT *
				FROM REVIEW
	   ]]>
	</select> 
	
 	<!-- 여행 후기 디테일 -->
	<!-- [reviewDetail] 여행후기 게시판 상세보기 -->
	<select id="reviewDetail" parameterType="hashmap"
		resultType="hashmap">
     <![CDATA[
     		SELECT * 
				FROM REVIEW
				WHERE RV_NUM = #{RV_NUM}
     ]]>
	</select>
	
	<!-- [reviewCommentList] 여행후기 게시판 댓글 목록 -->
	<select id="reviewCommentList" parameterType="hashmap" resultType="hashmap">
      <![CDATA[
          SELECT
            BC_BCID,
            BC_NUM,
            BC_COMMENT,
            BC_REGDATE,
            BC_ID      
         FROM 
            BOARDCOMMENT
            WHERE 
              BC_NUM = #{RV_NUM}
            ORDER BY BC_BCID DESC
      ]]>
   </select>
   
   	<!-- [insertReview] 여행후기 게시판 글 작성 -->
	<insert id="insertReview" parameterType="hashmap">
	<![CDATA[
			INSERT 
				INTO REVIEW
				(
				RV_NUM,
				RV_TITLE,
				RV_CONTENT,
				RV_REGDATE,
				RV_ID,
				RV_CNT,
				RV_LIKE,
				RV_IMAGE
				)
				VALUES(
					RV_NUM_SEQ.NEXTVAL, 
					#{RV_TITLE}, 
					#{RV_CONTENT}, 
					SYSDATE, 
					#{RV_ID}, 
					0, 
					0, 
					#{RV_IMAGE}
					)
	]]>
	</insert>
   
   	<!-- [reviewModifyForm] 여행후기 수정 폼 -->
	<select id="reviewModifyForm" parameterType="hashmap"
		resultType="hashmap">
      <![CDATA[
         SELECT
            RV_NUM,
            RV_TITLE,
            RV_CONTENT,
            RV_REGDATE
         FROM
            REVIEW
         WHERE
            RV_NUM = #{RV_NUM}
      ]]>
	</select>
	
	<!-- [reviewModify] 여행후기 수정 -->
	<update id="reviewModify" parameterType="hashmap">
      <![CDATA[
         UPDATE
            REVIEW
         SET
            RV_TITLE = #{RV_TITLE},
            RV_CONTENT = #{RV_CONTENT},
            RV_REGDATE = sysdate
         WHERE
            RV_NUM = #{RV_NUM}                 
      ]]>
	</update>
	
	<!-- [reviewDel] 여행후기 삭제 -->
	<delete id="reviewDel" parameterType="hashmap">
	<![CDATA[
		DELETE 
			FROM REVIEW
			WHERE RV_NUM = #{RV_NUM}
	]]>
	</delete>
   
</mapper>